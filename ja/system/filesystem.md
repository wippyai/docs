# ファイルシステム

ディレクトリおよび埋め込みファイルシステムアクセス。

## エントリ種別

| 種別 | 説明 |
|------|------|
| `fs.directory` | ディレクトリベースのファイルシステム |
| `fs.embed` | 読み取り専用埋め込みファイルシステム |

## ディレクトリファイルシステム

```yaml
- name: uploads
  kind: fs.directory
  directory: "/var/data/uploads"
  auto_init: true
  mode: "0755"
```

| フィールド | 型 | デフォルト | 説明 |
|------------|-----|------------|------|
| `directory` | string | 必須 | ルートパス |
| `auto_init` | bool | false | 存在しない場合はディレクトリを作成 |
| `mode` | string | 0755 | Unixパーミッションモード（8進数） |

モードはすべてのファイル操作を制限します。読み取りビットが存在する場合、実行ビットは自動的に追加されます。

<note>
パスは正規化および検証されます。設定されたルートディレクトリ外のファイルにアクセスすることはできません。
</note>

## 埋め込みファイルシステム

```yaml
- name: static
  kind: fs.embed
```

埋め込みファイルシステムはエントリIDを使用してパックリソースからロードします。読み取り専用です。

<warning>
埋め込みファイルシステムは内部メカニズムです。手動設定は通常必要ありません。
</warning>

## 操作

両方のファイルシステムタイプが実装するもの：

| 操作 | ディレクトリ | 埋め込み |
|------|-------------|---------|
| Open/Read | はい | はい |
| Stat | はい | はい |
| ReadDir | はい | はい |
| OpenFile (write) | はい | いいえ |
| Remove | はい | いいえ |
| Mkdir | はい | いいえ |

埋め込みファイルシステムでの書き込み操作はエラーを返します。

## Lua API

ファイル操作については[ファイルシステムモジュール](lua/storage/filesystem.md)を参照してください。
